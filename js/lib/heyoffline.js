var Heyoffline,addEvent,destroy,extend,setStyles,__bind=function(e,t){return function(){return e.apply(t,arguments)}};extend=function(e,t){var n;if(t)for(n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},arguments.callee(e[n],t[n])):e[n]=t[n];return e},addEvent=function(e,t,n,o){return null==o&&(o=!1),e.addEventListener(t,n,o)},setStyles=function(e,t){var n,o;o=[];for(n in t)o.push(e.style[n]=t[n]);return o},destroy=function(e){return e.parentNode.removeChild(e)},Heyoffline=function(){function e(e){this.hideMessage=__bind(this.hideMessage,this),this.offline=__bind(this.offline,this),this.online=__bind(this.online,this),extend(this.options,e),this.setup()}return e.prototype.version="1.1",e.prototype.options={text:{title:"You're currently offline",content:"Seems like you've gone offline,                you might want to wait until your network comes back before continuing.<br /><br />                This message will self-destruct once you're online again.",button:"Relax, I know what I'm doing"},monitorFields:!1,prefix:"heyoffline",noStyles:!1,disableDismiss:!1,elements:["input","select","textarea","*[contenteditable]"]},e.prototype.modified=!1,e.prototype.setup=function(){return this.events={element:["keyup","change"],network:["online","offline"]},this.elements={fields:document.querySelectorAll(this.options.elements.join(",")),overlay:document.createElement("div"),modal:document.createElement("div"),heading:document.createElement("h2"),content:document.createElement("p"),button:document.createElement("a")},this.defaultStyles={overlay:{position:"absolute",top:0,left:0,width:"100%",background:"rgba(0, 0, 0, 0.3)",zIndex:500},modal:{padding:"15px",background:"#fff",boxShadow:"0 2px 30px rgba(0, 0, 0, 0.3)",width:"450px",margin:"0 auto",position:"relative",top:"30%",color:"#444",borderRadius:"2px",zIndex:600},heading:{fontSize:"1.7em",paddingBottom:"15px"},content:{paddingBottom:"15px"},button:{fontWeight:"bold",cursor:"pointer"}},this.attachEvents()},e.prototype.createElements=function(){return this.createElement(document.body,"overlay"),this.resizeOverlay(),this.createElement(this.elements.overlay,"modal"),this.createElement(this.elements.modal,"heading",this.options.text.title),this.createElement(this.elements.modal,"content",this.options.text.content),this.options.disableDismiss?void 0:(this.createElement(this.elements.modal,"button",this.options.text.button),addEvent(this.elements.button,"click",this.hideMessage))},e.prototype.createElement=function(e,t,n){return this.elements[t].setAttribute("class",""+this.options.prefix+"_"+t),this.elements[t]=e.appendChild(this.elements[t]),n&&(this.elements[t].innerHTML=n),this.options.noStyles?void 0:setStyles(this.elements[t],this.defaultStyles[t])},e.prototype.resizeOverlay=function(){return setStyles(this.elements.overlay,{height:""+window.innerHeight+"px"})},e.prototype.destroyElements=function(){return this.elements.overlay?destroy(this.elements.overlay):void 0},e.prototype.attachEvents=function(){var e,t,n,o,i,s,r,l,h=this;for(r=this.elements.fields,n=0,i=r.length;i>n;n++)t=r[n],this.elementEvents(t);for(l=this.events.network,o=0,s=l.length;s>o;o++)e=l[o],this.networkEvents(e);return addEvent(window,"resize",function(){return h.resizeOverlay()})},e.prototype.elementEvents=function(e){var t,n,o,i,s,r=this;for(i=this.events.element,s=[],n=0,o=i.length;o>n;n++)t=i[n],s.push(function(t){return addEvent(e,t,function(){return r.modified=!0})}(t));return s},e.prototype.networkEvents=function(e){return addEvent(window,e,this[e])},e.prototype.online=function(e){return this.hideMessage()},e.prototype.offline=function(){return this.options.monitorFields?this.modified?this.showMessage():void 0:this.showMessage()},e.prototype.showMessage=function(){return this.createElements(),this.options.onOnline?this.options.onOnline.call(this):void 0},e.prototype.hideMessage=function(e){return e&&e.preventDefault(),this.destroyElements(),this.options.onOffline?this.options.onOffline.call(this):void 0},e}();